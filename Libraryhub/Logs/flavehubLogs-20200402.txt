2020-04-02T16:41:40.6219098+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T16:41:53.6380529+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T16:41:53.6524494+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T16:41:53.9972377+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:42:06.1594789+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:42:10.3670576+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:42:11.0721077+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T16:42:14.7880304+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/   (ca22a1cb)
2020-04-02T16:42:17.8681753+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:42:22.8413215+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T16:42:22.9389101+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T16:42:23.3448675+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 5247.6347000000005ms (afa2e885)
2020-04-02T16:42:23.3950641+01:00 80000094-0000-fd00-b63f-84710c7967bb [INF] Request finished in 9459.7358ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T16:42:29.0747916+01:00 80000081-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T16:42:29.2468477+01:00 80000081-0001-ff00-b63f-84710c7967bb [INF] Request finished in 193.7853ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T16:42:34.5692167+01:00 80000083-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/v1/swagger.json   (ca22a1cb)
2020-04-02T16:42:35.0921804+01:00 80000083-0001-ff00-b63f-84710c7967bb [INF] Request finished in 861.6218ms 200 application/json;charset=utf-8 (791a596a)
2020-04-02T16:42:46.8263488+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T16:42:46.9362413+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:42:47.0331428+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Authorization failed. (b15dd539)
2020-04-02T16:42:47.0420727+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'. (8b6446cb)
2020-04-02T16:42:47.0611652+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Executing ChallengeResult with authentication schemes (["Bearer"]). (f3dca807)
2020-04-02T16:42:47.0979258+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2020-04-02T16:42:47.1107377+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 161.2475ms (afa2e885)
2020-04-02T16:42:47.1245623+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:42:47.1419026+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T16:42:47.1669459+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 18.7332ms (afa2e885)
2020-04-02T16:42:47.2257931+01:00 80000096-0000-fd00-b63f-84710c7967bb [INF] Request finished in 415.5953ms 401 application/json; charset=utf-8 (791a596a)
2020-04-02T16:43:26.8406095+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/identity/login application/json 67 (ca22a1cb)
2020-04-02T16:43:26.8834797+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Identity\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Libraryhub.Contracts.RequestObjs.UserLoginReqObj)" on controller "Libraryhub.Controllers.V1.IdentityController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:43:27.6134123+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:43:27.6501841+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T16:43:28.2646008+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE ([a].[UserId] = @__user_Id_0) AND @__user_Id_0 IS NOT NULL" (65d11854)
2020-04-02T16:43:30.3287019+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE ([a].[UserId] = @__userId_0) AND @__userId_0 IS NOT NULL" (65d11854)
2020-04-02T16:43:32.2433437+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:43:32.3244240+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__role_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE ([a].[RoleId] = @__role_Id_0) AND @__role_Id_0 IS NOT NULL" (65d11854)
2020-04-02T16:43:35.1733734+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Token], [CreationDate], [ExpiryDate], [Invalidated], [JwtId], [Used], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (65d11854)
2020-04-02T16:43:35.8376598+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.AuthSuccessResponse"'. (8a1b66c8)
2020-04-02T16:43:35.9242239+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.IdentityController.Login (Libraryhub)" in 8989.0696ms (afa2e885)
2020-04-02T16:43:36.8980577+01:00 80000085-0001-ff00-b63f-84710c7967bb [INF] Request finished in 9285.4465ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T16:44:09.3433839+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T16:44:11.6307403+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T16:44:11.6767319+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:44:11.6980174+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T16:44:12.7855957+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:44:12.9823536+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T16:44:14.2442268+01:00 80000087-0001-ff00-b63f-84710c7967bb [ERR] An exception occurred while iterating over the results of a query for context type '"Libraryhub.Data.DataContext"'."
""System.InvalidCastException: Unable to cast object of type 'System.DateTime' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , Int32[] , ResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()" (f5c7ac34)
System.InvalidCastException: Unable to cast object of type 'System.DateTime' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , Int32[] , ResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2020-04-02T16:44:23.6610080+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 10425.3641ms (afa2e885)
2020-04-02T16:44:26.3066927+01:00 80000087-0001-ff00-b63f-84710c7967bb [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidCastException: Unable to cast object of type 'System.DateTime' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , Int32[] , ResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Libraryhub.Service.ServiceImplementation.BookService.GetAllBooksAsync() in C:\M_proj2\Client\Libraryhub\Libraryhub\Service\ServiceImplementation\BookService.cs:line 29
   at Libraryhub.Handlers.Books.GetAllBooksHandler.MediatR.IRequestHandler<Libraryhub.Contracts.Queries.GetAllBooksQuery,System.Collections.Generic.List<Libraryhub.Contracts.RequestObjs.BookResponseObj>>.Handle(GetAllBooksQuery request, CancellationToken cancellationToken) in C:\M_proj2\Client\Libraryhub\Libraryhub\Handlers\Books\GetAllBooksHandler.cs:line 26
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at Libraryhub.Controllers.V1.BookController.GetAllPostAsync() in C:\M_proj2\Client\Libraryhub\Libraryhub\Controllers\V1\BookController.cs:line 40
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-04-02T16:44:26.8058162+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:44:27.1071675+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T16:44:27.1153907+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T16:44:27.2210934+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 388.4803ms (afa2e885)
2020-04-02T16:44:27.3569585+01:00 80000087-0001-ff00-b63f-84710c7967bb [INF] Request finished in 17918.2801ms 500 application/json; charset=utf-8 (791a596a)
2020-04-02T16:46:49.7479734+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T16:47:01.9385822+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T16:47:01.9678684+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T16:47:02.2644697+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:47:13.4691672+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:47:14.0656092+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:47:14.1300102+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T16:47:14.8547131+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/   (ca22a1cb)
2020-04-02T16:47:15.7349750+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:47:18.6997150+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T16:47:19.4240546+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T16:47:19.9245650+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 4142.6537ms (afa2e885)
2020-04-02T16:47:20.0095345+01:00 80000098-0000-fd00-b63f-84710c7967bb [INF] Request finished in 5149.3397ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T16:47:31.3541132+01:00 80000089-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T16:47:31.4548756+01:00 80000089-0001-ff00-b63f-84710c7967bb [INF] Request finished in 105.3523ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T16:47:33.0820164+01:00 8000008b-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/v1/swagger.json   (ca22a1cb)
2020-04-02T16:47:33.5755627+01:00 8000008b-0001-ff00-b63f-84710c7967bb [INF] Request finished in 467.28490000000005ms 200 application/json;charset=utf-8 (791a596a)
2020-04-02T16:48:12.3458341+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T16:48:12.4289748+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:48:12.4786486+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Authorization failed. (b15dd539)
2020-04-02T16:48:12.4900702+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'. (8b6446cb)
2020-04-02T16:48:12.5208828+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Executing ChallengeResult with authentication schemes (["Bearer"]). (f3dca807)
2020-04-02T16:48:12.5469716+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2020-04-02T16:48:12.5635846+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 117.8875ms (afa2e885)
2020-04-02T16:48:12.5768148+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:48:12.5926342+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T16:48:12.6130464+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 17.6369ms (afa2e885)
2020-04-02T16:48:12.7570237+01:00 8000009a-0000-fd00-b63f-84710c7967bb [INF] Request finished in 723.2665000000001ms 401 application/json; charset=utf-8 (791a596a)
2020-04-02T16:48:40.2216024+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/identity/login application/json 67 (ca22a1cb)
2020-04-02T16:48:40.2918745+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Identity\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Libraryhub.Contracts.RequestObjs.UserLoginReqObj)" on controller "Libraryhub.Controllers.V1.IdentityController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:48:40.5485498+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:48:40.5669243+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T16:48:43.1149409+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE ([a].[UserId] = @__user_Id_0) AND @__user_Id_0 IS NOT NULL" (65d11854)
2020-04-02T16:48:44.3471477+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE ([a].[UserId] = @__userId_0) AND @__userId_0 IS NOT NULL" (65d11854)
2020-04-02T16:48:44.4082160+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T16:48:44.4500109+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__role_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE ([a].[RoleId] = @__role_Id_0) AND @__role_Id_0 IS NOT NULL" (65d11854)
2020-04-02T16:48:45.9593943+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Token], [CreationDate], [ExpiryDate], [Invalidated], [JwtId], [Used], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (65d11854)
2020-04-02T16:48:46.1442921+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.AuthSuccessResponse"'. (8a1b66c8)
2020-04-02T16:48:46.1798715+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.IdentityController.Login (Libraryhub)" in 5867.4425ms (afa2e885)
2020-04-02T16:48:46.2207029+01:00 8000008d-0001-ff00-b63f-84710c7967bb [INF] Request finished in 6047.330400000001ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T16:49:11.2821556+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T16:49:11.6274328+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T16:49:11.6443793+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T16:49:11.6605929+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T16:49:12.7710606+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T16:49:13.0673069+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T16:49:15.2907815+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Unable to Process request Flave123 (71209f87)
2020-04-02T16:49:15.5508795+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T16:49:16.9925824+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 4665.3294000000005ms (afa2e885)
2020-04-02T16:49:17.0199848+01:00 8000009c-0000-fd00-b63f-84710c7967bb [INF] Request finished in 5842.137000000001ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T17:12:01.3601359+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T17:12:25.1059018+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T17:12:25.6598027+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T17:12:30.1937479+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T17:13:06.2561177+01:00  [ERR] An error occurred using the connection to database '"Libraryhub"' on server '"FLAVE-DESKTOP-9"'. (5fc3407c)
2020-04-02T17:13:18.7040937+01:00  [ERR] An exception occurred while iterating over the results of a query for context type '"Libraryhub.Data.DataContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5673; handshake=4907; [Login] initialization=10; authentication=601; [Post-Login] complete=5058; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:69434c80-b966-4e7f-a04a-6c81b5d21114
Error Number:-2,State:0,Class:11" (f5c7ac34)
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5673; handshake=4907; [Login] initialization=10; authentication=601; [Post-Login] complete=5058; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.RoleExistsAsync(String roleName)
   at Libraryhub.Startup.CreateRolesAndAdminUser(IServiceProvider serviceProvider) in C:\M_proj2\Client\Libraryhub\Libraryhub\Startup.cs:line 102
ClientConnectionId:69434c80-b966-4e7f-a04a-6c81b5d21114
Error Number:-2,State:0,Class:11
2020-04-02T17:14:48.3088335+01:00  [FTL] Application startup exception (6c57a5ba)
System.AggregateException: One or more errors occurred. (Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5673; handshake=4907; [Login] initialization=10; authentication=601; [Post-Login] complete=5058; )
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=5673; handshake=4907; [Login] initialization=10; authentication=601; [Post-Login] complete=5058; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.RoleExistsAsync(String roleName)
   at Libraryhub.Startup.CreateRolesAndAdminUser(IServiceProvider serviceProvider) in C:\M_proj2\Client\Libraryhub\Libraryhub\Startup.cs:line 102
ClientConnectionId:69434c80-b966-4e7f-a04a-6c81b5d21114
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)
   at System.Threading.Tasks.Task.Wait()
   at Libraryhub.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env, ILoggerFactory loggerFactory, IServiceProvider serviceProvider) in C:\M_proj2\Client\Libraryhub\Libraryhub\Startup.cs:line 81
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Server.IIS.Core.IISServerSetupFilter.<>c__DisplayClass2_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
   at Microsoft.AspNetCore.Hosting.WebHost.StartAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.WebHostExtensions.RunAsync(IWebHost host, CancellationToken token, String startupMessage)
2020-04-02T17:20:26.7521985+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T17:20:44.3458658+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T17:20:44.3770828+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T17:20:44.6963445+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T17:20:55.2621110+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T17:20:56.4723022+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T17:21:00.8754203+01:00  [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);" (65d11854)
2020-04-02T17:21:01.0650307+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T17:21:02.1486968+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T17:21:02.2365322+01:00  [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);" (65d11854)
2020-04-02T17:21:02.3971405+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T17:21:06.3307069+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedUserName] = @__normalizedUserName_0) AND ([a].[NormalizedUserName] IS NOT NULL AND @__normalizedUserName_0 IS NOT NULL)) OR ([a].[NormalizedUserName] IS NULL AND @__normalizedUserName_0 IS NULL)" (65d11854)
2020-04-02T17:21:07.7598233+01:00  [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NationalIdentificationNumber], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);" (65d11854)
2020-04-02T17:21:07.8875924+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedRoleName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedRoleName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedRoleName_0 IS NULL)" (65d11854)
2020-04-02T17:21:08.0477213+01:00  [INF] Executing DbCommand [Parameters=["@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE (([a].[UserId] = @__p_0) AND @__p_0 IS NOT NULL) AND (([a].[RoleId] = @__p_1) AND @__p_1 IS NOT NULL)" (65d11854)
2020-04-02T17:21:08.1112084+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedRoleName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedRoleName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedRoleName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedRoleName_0 IS NULL)" (65d11854)
2020-04-02T17:21:08.1890198+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedUserName] = @__normalizedUserName_0) AND ([a].[NormalizedUserName] IS NOT NULL AND @__normalizedUserName_0 IS NOT NULL)) OR ([a].[NormalizedUserName] IS NULL AND @__normalizedUserName_0 IS NULL)" (65d11854)
2020-04-02T17:21:08.3000011+01:00  [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
VALUES (@p0, @p1);" (65d11854)
2020-04-02T17:21:08.4012916+01:00  [INF] Executing DbCommand [Parameters=["@p16='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 4000), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FullName] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NationalIdentificationNumber] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;" (65d11854)
2020-04-02T17:21:18.8018705+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/   (ca22a1cb)
2020-04-02T17:21:22.9120186+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T17:21:24.9531126+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T17:21:26.7968881+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T17:21:27.2245983+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 4279.8754ms (afa2e885)
2020-04-02T17:21:27.3533206+01:00 8000008f-0001-ff00-b63f-84710c7967bb [INF] Request finished in 9629.6096ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T17:21:35.1505130+01:00 80000091-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T17:21:35.4094481+01:00 80000091-0001-ff00-b63f-84710c7967bb [INF] Request finished in 272.5418ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T17:21:41.9721422+01:00 8000009f-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/v1/swagger.json   (ca22a1cb)
2020-04-02T17:21:42.7009555+01:00 8000009f-0000-fd00-b63f-84710c7967bb [INF] Request finished in 726.7737000000001ms 200 application/json;charset=utf-8 (791a596a)
2020-04-02T18:03:17.1075571+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T18:03:28.2746191+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T18:03:28.2801543+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T18:03:28.4883562+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:03:37.4446366+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:03:38.2924044+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:03:38.4531719+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T18:03:43.2894981+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/   (ca22a1cb)
2020-04-02T18:03:43.2998023+01:00 800000a1-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T18:03:44.8033493+01:00 800000a1-0000-fd00-b63f-84710c7967bb [INF] Request finished in 1565.4483ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T18:03:45.5517095+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:03:45.9247030+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T18:03:46.0115447+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T18:03:46.1220917+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 542.3364ms (afa2e885)
2020-04-02T18:03:46.1292475+01:00 80000093-0001-ff00-b63f-84710c7967bb [INF] Request finished in 2861.877ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T18:03:46.5464165+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/favicon.ico   (ca22a1cb)
2020-04-02T18:03:46.7639360+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:03:46.7735798+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T18:03:46.7822695+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T18:03:46.9494948+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 19.1568ms (afa2e885)
2020-04-02T18:03:47.9591964+01:00 80000095-0001-ff00-b63f-84710c7967bb [INF] Request finished in 412.2113ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T18:06:17.8002404+01:00 80000097-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T18:06:17.8711460+01:00 80000097-0001-ff00-b63f-84710c7967bb [INF] Request finished in 37.1837ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T18:06:19.1449367+01:00 80000099-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/v1/swagger.json   (ca22a1cb)
2020-04-02T18:06:20.0381755+01:00 80000099-0001-ff00-b63f-84710c7967bb [INF] Request finished in 738.0311ms 200 application/json;charset=utf-8 (791a596a)
2020-04-02T18:12:20.2584582+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/identity/login application/json 67 (ca22a1cb)
2020-04-02T18:12:20.3484587+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Identity\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Libraryhub.Contracts.RequestObjs.UserLoginReqObj)" on controller "Libraryhub.Controllers.V1.IdentityController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:12:21.1999380+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:12:22.8199477+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T18:12:24.2987322+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE ([a].[UserId] = @__user_Id_0) AND @__user_Id_0 IS NOT NULL" (65d11854)
2020-04-02T18:12:26.4147803+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE ([a].[UserId] = @__userId_0) AND @__userId_0 IS NOT NULL" (65d11854)
2020-04-02T18:12:26.4601061+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:12:26.4856080+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__role_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE ([a].[RoleId] = @__role_Id_0) AND @__role_Id_0 IS NOT NULL" (65d11854)
2020-04-02T18:12:28.2944343+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Token], [CreationDate], [ExpiryDate], [Invalidated], [JwtId], [Used], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (65d11854)
2020-04-02T18:12:28.3759511+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.AuthSuccessResponse"'. (8a1b66c8)
2020-04-02T18:12:28.3972142+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.IdentityController.Login (Libraryhub)" in 8033.8743ms (afa2e885)
2020-04-02T18:12:28.4514985+01:00 800000a3-0000-fd00-b63f-84710c7967bb [INF] Request finished in 8202.9881ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:13:33.8912588+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T18:13:34.4927056+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:13:34.5402305+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:13:34.5748504+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:13:36.2043294+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:13:36.4727136+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T18:13:37.8438761+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Unable to Process request Flave123 (71209f87)
2020-04-02T18:13:37.9302704+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:13:38.0651352+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 3452.9984ms (afa2e885)
2020-04-02T18:13:38.4833076+01:00 8000009b-0001-ff00-b63f-84710c7967bb [INF] Request finished in 4705.0357ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:14:34.8237265+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CreateBook application/json 96 (ca22a1cb)
2020-04-02T18:14:34.8780402+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:14:35.0609684+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"Create\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Libraryhub.Contracts.RequestObjs.AddBookRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:14:35.4091476+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:14:35.8992842+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:14:36.1159878+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 13), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Books] ([CoverPrice], [ISBN], [IsAvailable], [PublishYear], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [BookId]
FROM [Books]
WHERE @@ROWCOUNT = 1 AND [BookId] = scope_identity();" (65d11854)
2020-04-02T18:14:36.6147124+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.BookResponseObj"'. (8a1b66c8)
2020-04-02T18:14:36.7464461+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.Create (Libraryhub)" in 1651.2445ms (afa2e885)
2020-04-02T18:14:36.7531610+01:00 8000009d-0001-ff00-b63f-84710c7967bb [INF] Request finished in 1957.4359000000002ms 201 application/json; charset=utf-8 (791a596a)
2020-04-02T18:14:51.4567174+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/LoadBookByTitle application/json 18 (ca22a1cb)
2020-04-02T18:14:51.4714214+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:14:51.4899848+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetBookByTitle\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookByTitle(Libraryhub.Contracts.RequestObjs.BookByTitleSearchObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:14:51.5050284+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:14:51.5436748+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:14:51.5794292+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__Trim_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE (LTRIM(RTRIM(LOWER([b].[Title]))) = @__Trim_0) AND @__Trim_0 IS NOT NULL" (65d11854)
2020-04-02T18:14:51.6619061+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.BookResponseObj"'. (8a1b66c8)
2020-04-02T18:14:51.6916602+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetBookByTitle (Libraryhub)" in 181.36530000000002ms (afa2e885)
2020-04-02T18:14:51.8221768+01:00 800000a5-0000-fd00-b63f-84710c7967bb [INF] Request finished in 285.5887ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:15:05.0930116+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/LoadBookByISBN application/json 22 (ca22a1cb)
2020-04-02T18:15:05.1189619+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:15:05.1413432+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetBookByISBN\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookByISBN(Libraryhub.Contracts.RequestObjs.BookByISBNSearchObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:15:05.1463736+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:15:05.1952025+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:15:05.4565377+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__Trim_0='?' (Size = 13)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE (LTRIM(RTRIM(LOWER([b].[ISBN]))) = @__Trim_0) AND @__Trim_0 IS NOT NULL" (65d11854)
2020-04-02T18:15:05.5321141+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.BookResponseObj"'. (8a1b66c8)
2020-04-02T18:15:05.5430445+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetBookByISBN (Libraryhub)" in 395.7611ms (afa2e885)
2020-04-02T18:15:05.5472427+01:00 8000009f-0001-ff00-b63f-84710c7967bb [INF] Request finished in 463.92780000000005ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:15:19.7727475+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/LoadBookByStatus application/json 15 (ca22a1cb)
2020-04-02T18:15:19.7805359+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:15:19.8114493+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetBookByStatus\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetBookByStatus(Libraryhub.Contracts.RequestObjs.BookByStatusSearchObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:15:19.8159834+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:15:19.8355913+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:15:19.8510002+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__status_0='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE ([b].[IsAvailable] = @__status_0) AND @__status_0 IS NOT NULL" (65d11854)
2020-04-02T18:15:19.8658535+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:15:19.8751356+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetBookByStatus (Libraryhub)" in 55.440200000000004ms (afa2e885)
2020-04-02T18:15:19.8777136+01:00 800000a1-0001-ff00-b63f-84710c7967bb [INF] Request finished in 112.06960000000001ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:15:27.8253411+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/LoadBookByStatus application/json 16 (ca22a1cb)
2020-04-02T18:15:27.8488221+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:15:27.8543423+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetBookByStatus\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetBookByStatus(Libraryhub.Contracts.RequestObjs.BookByStatusSearchObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:15:27.8583058+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:15:27.8719886+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:15:27.8818058+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__status_0='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title]
FROM [Books] AS [b]
WHERE ([b].[IsAvailable] = @__status_0) AND @__status_0 IS NOT NULL" (65d11854)
2020-04-02T18:15:27.8914249+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:15:27.9047107+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetBookByStatus (Libraryhub)" in 38.2642ms (afa2e885)
2020-04-02T18:15:27.9076245+01:00 800000a7-0000-fd00-b63f-84710c7967bb [INF] Request finished in 126.3785ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:15:42.7496090+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T18:15:43.1738661+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:15:44.1290324+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:15:44.1873077+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:15:44.3373678+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:15:44.3869506+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T18:15:44.5532508+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Unable to Process request Flave123 (71209f87)
2020-04-02T18:15:44.5673334+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:15:44.5826024+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 440.45300000000003ms (afa2e885)
2020-04-02T18:15:44.5873388+01:00 800000a9-0000-fd00-b63f-84710c7967bb [INF] Request finished in 1879.6842000000001ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:16:42.9244502+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CheckOutBooks application/json 60 (ca22a1cb)
2020-04-02T18:16:42.9439555+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:16:42.9639488+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"CheckOutBook\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckOutBook(Libraryhub.Contracts.RequestObjs.AddCheckOutActivityRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:16:42.9711485+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:16:43.0252517+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:16:43.0630485+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Id] = @__p_0) AND @__p_0 IS NOT NULL" (65d11854)
2020-04-02T18:17:12.2896530+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 12), @p6='?' (Size = 12), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [BookActivities] ([BookId], [CheckOutDate], [Email], [ExpectedReturnDate], [FullName], [NationalIdentificationNumber], [PhoneNumber], [ReturnDate], [Status], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [CheckOutActivityId]
FROM [BookActivities]
WHERE @@ROWCOUNT = 1 AND [CheckOutActivityId] = scope_identity();" (65d11854)
2020-04-02T18:17:12.5769123+01:00 800000a3-0001-ff00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("270"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 12), @p6='?' (Size = 12), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [BookActivities] ([BookId], [CheckOutDate], [Email], [ExpectedReturnDate], [FullName], [NationalIdentificationNumber], [PhoneNumber], [ReturnDate], [Status], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [CheckOutActivityId]
FROM [BookActivities]
WHERE @@ROWCOUNT = 1 AND [CheckOutActivityId] = scope_identity();" (627a98df)
2020-04-02T18:17:13.9891297+01:00 800000a3-0001-ff00-b63f-84710c7967bb [ERR] An exception occurred in the database while saving changes for context type '"Libraryhub.Data.DataContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'NationalIdentificationNumber', table 'Libraryhub.dbo.BookActivities'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b0231ec-f43a-4f6e-b1cc-957ec3d1de30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'NationalIdentificationNumber', table 'Libraryhub.dbo.BookActivities'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b0231ec-f43a-4f6e-b1cc-957ec3d1de30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Libraryhub.Service.ServiceImplementation.BookService.CheckOutBookAsync(CheckOutActivity req) in C:\M_proj2\Client\Libraryhub\Libraryhub\Service\ServiceImplementation\BookService.cs:line 65
2020-04-02T18:17:14.6853848+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Something went wrong (31bcc049)
2020-04-02T18:17:15.8510436+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Unable to Process request (a92645cb)
2020-04-02T18:17:15.8692287+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BadRequestError"'. (8a1b66c8)
2020-04-02T18:17:16.0220015+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.CheckOutBook (Libraryhub)" in 33017.9308ms (afa2e885)
2020-04-02T18:17:16.0418791+01:00 800000a3-0001-ff00-b63f-84710c7967bb [INF] Request finished in 33117.5633ms 400 application/json; charset=utf-8 (791a596a)
2020-04-02T18:17:43.4884608+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CheckOutBooks application/json 60 (ca22a1cb)
2020-04-02T18:17:43.5289545+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:17:43.5452133+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"CheckOutBook\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckOutBook(Libraryhub.Contracts.RequestObjs.AddCheckOutActivityRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:17:43.5598786+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:17:43.5768992+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:17:43.5904902+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Id] = @__p_0) AND @__p_0 IS NOT NULL" (65d11854)
2020-04-02T18:21:05.5608965+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 12), @p6='?' (Size = 12), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [BookActivities] ([BookId], [CheckOutDate], [Email], [ExpectedReturnDate], [FullName], [NationalIdentificationNumber], [PhoneNumber], [ReturnDate], [Status], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [CheckOutActivityId]
FROM [BookActivities]
WHERE @@ROWCOUNT = 1 AND [CheckOutActivityId] = scope_identity();" (65d11854)
2020-04-02T18:21:05.6725137+01:00 800000ab-0000-fd00-b63f-84710c7967bb [ERR] Failed executing DbCommand ("829"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 12), @p6='?' (Size = 12), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [BookActivities] ([BookId], [CheckOutDate], [Email], [ExpectedReturnDate], [FullName], [NationalIdentificationNumber], [PhoneNumber], [ReturnDate], [Status], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [CheckOutActivityId]
FROM [BookActivities]
WHERE @@ROWCOUNT = 1 AND [CheckOutActivityId] = scope_identity();" (627a98df)
2020-04-02T18:21:05.7063348+01:00 800000ab-0000-fd00-b63f-84710c7967bb [ERR] An exception occurred in the database while saving changes for context type '"Libraryhub.Data.DataContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'NationalIdentificationNumber', table 'Libraryhub.dbo.BookActivities'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b0231ec-f43a-4f6e-b1cc-957ec3d1de30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)" (170f029e)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'NationalIdentificationNumber', table 'Libraryhub.dbo.BookActivities'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b0231ec-f43a-4f6e-b1cc-957ec3d1de30
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Libraryhub.Service.ServiceImplementation.BookService.CheckOutBookAsync(CheckOutActivity req) in C:\M_proj2\Client\Libraryhub\Libraryhub\Service\ServiceImplementation\BookService.cs:line 65
2020-04-02T18:21:06.3383833+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Something went wrong (31bcc049)
2020-04-02T18:21:06.9499474+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Unable to Process request (a92645cb)
2020-04-02T18:21:06.9664050+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BadRequestError"'. (8a1b66c8)
2020-04-02T18:21:06.9847589+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.CheckOutBook (Libraryhub)" in 203423.1109ms (afa2e885)
2020-04-02T18:21:06.9985598+01:00 800000ab-0000-fd00-b63f-84710c7967bb [INF] Request finished in 203501.02250000002ms 400 application/json; charset=utf-8 (791a596a)
2020-04-02T18:21:11.3869380+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CheckOutBooks application/json 60 (ca22a1cb)
2020-04-02T18:21:11.7648961+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:21:11.8227529+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"CheckOutBook\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckOutBook(Libraryhub.Contracts.RequestObjs.AddCheckOutActivityRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:21:11.9013597+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:21:12.0557122+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:21:12.0818592+01:00 800000ad-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Id] = @__p_0) AND @__p_0 IS NOT NULL" (65d11854)
2020-04-02T18:26:24.7892947+01:00  [INF] User profile is available. Using '"C:\Users\flave\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2020-04-02T18:26:30.9336848+01:00  [WRN] No type was specified for the decimal column '"CoverPrice"' on entity type '"Book"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T18:26:30.9374915+01:00  [WRN] No type was specified for the decimal column '"PenaltyFee"' on entity type '"BookPenalty"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'. (3a0db05f)
2020-04-02T18:26:31.0977757+01:00  [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:26:52.6724675+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:26:53.5975821+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:26:54.3494990+01:00  [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T18:26:56.6547214+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/   (ca22a1cb)
2020-04-02T18:26:57.1703672+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:26:57.2764260+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] checkError (d4747a14)
2020-04-02T18:26:57.2899785+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T18:26:57.4308927+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 170.27960000000002ms (afa2e885)
2020-04-02T18:26:57.5109792+01:00 800000af-0000-fd00-b63f-84710c7967bb [INF] Request finished in 860.2652ms 404 application/json; charset=utf-8 (791a596a)
2020-04-02T18:27:32.1723770+01:00 800000b1-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/index.html   (ca22a1cb)
2020-04-02T18:27:34.2941991+01:00 800000b1-0000-fd00-b63f-84710c7967bb [INF] Request finished in 2599.2256ms 200 text/html;charset=utf-8 (791a596a)
2020-04-02T18:27:35.8492521+01:00 800000a5-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/swagger/v1/swagger.json   (ca22a1cb)
2020-04-02T18:27:36.1597858+01:00 800000a5-0001-ff00-b63f-84710c7967bb [INF] Request finished in 691.484ms 200 application/json;charset=utf-8 (791a596a)
2020-04-02T18:27:51.3454986+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T18:27:51.5979119+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:27:51.8950310+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Authorization failed. (b15dd539)
2020-04-02T18:27:51.9036414+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'. (8b6446cb)
2020-04-02T18:27:51.9213530+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Executing ChallengeResult with authentication schemes (["Bearer"]). (f3dca807)
2020-04-02T18:27:51.9494491+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] AuthenticationScheme: "Bearer" was challenged. (d45f1f38)
2020-04-02T18:27:51.9544726+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 350.65270000000004ms (afa2e885)
2020-04-02T18:27:51.9655307+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"GenerateErrorMessage\", controller = \"Errors\", page = \"\", area = \"\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult GenerateErrorMessage(System.Nullable`1[System.Int32])" on controller "Libraryhub.CustomError.ErrorsController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:27:51.9796147+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.CustomError.BaseApiError"'. (8a1b66c8)
2020-04-02T18:27:51.9960808+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.CustomError.ErrorsController.GenerateErrorMessage (Libraryhub)" in 15.162500000000001ms (afa2e885)
2020-04-02T18:27:52.0016023+01:00 800000a7-0001-ff00-b63f-84710c7967bb [INF] Request finished in 838.3718ms 401 application/json; charset=utf-8 (791a596a)
2020-04-02T18:28:10.7269826+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/identity/login application/json 67 (ca22a1cb)
2020-04-02T18:28:11.2232907+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"Login\", controller = \"Identity\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Libraryhub.Contracts.RequestObjs.UserLoginReqObj)" on controller "Libraryhub.Controllers.V1.IdentityController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:28:12.4884798+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:28:12.5188558+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE (([a].[NormalizedEmail] = @__normalizedEmail_0) AND ([a].[NormalizedEmail] IS NOT NULL AND @__normalizedEmail_0 IS NOT NULL)) OR ([a].[NormalizedEmail] IS NULL AND @__normalizedEmail_0 IS NULL)" (65d11854)
2020-04-02T18:28:12.7016044+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE ([a].[UserId] = @__user_Id_0) AND @__user_Id_0 IS NOT NULL" (65d11854)
2020-04-02T18:28:12.8362673+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE ([a].[UserId] = @__userId_0) AND @__userId_0 IS NOT NULL" (65d11854)
2020-04-02T18:28:12.8552282+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE (([a].[NormalizedName] = @__normalizedName_0) AND ([a].[NormalizedName] IS NOT NULL AND @__normalizedName_0 IS NOT NULL)) OR ([a].[NormalizedName] IS NULL AND @__normalizedName_0 IS NULL)" (65d11854)
2020-04-02T18:28:12.8803176+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__role_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE ([a].[RoleId] = @__role_Id_0) AND @__role_Id_0 IS NOT NULL" (65d11854)
2020-04-02T18:28:14.9684198+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (Size = 450), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Token], [CreationDate], [ExpiryDate], [Invalidated], [JwtId], [Used], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (65d11854)
2020-04-02T18:28:16.3058540+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.AuthSuccessResponse"'. (8a1b66c8)
2020-04-02T18:28:16.3554582+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.IdentityController.Login (Libraryhub)" in 5111.898ms (afa2e885)
2020-04-02T18:28:16.4065067+01:00 800000b3-0000-fd00-b63f-84710c7967bb [INF] Request finished in 6181.7273000000005ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:28:37.9328759+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T18:28:38.2639318+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:28:38.2773860+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:28:38.2829403+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:28:39.1974194+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:28:39.3700120+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T18:28:39.7461115+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Unable to Process request Flave123 (71209f87)
2020-04-02T18:28:39.7565250+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:28:39.7914626+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 1507.2976ms (afa2e885)
2020-04-02T18:28:39.7980254+01:00 800000b5-0000-fd00-b63f-84710c7967bb [INF] Request finished in 1866.3163000000002ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:28:57.0971725+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CheckOutBooks application/json 60 (ca22a1cb)
2020-04-02T18:28:57.1422832+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:28:57.1736421+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Route matched with "{action = \"CheckOutBook\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckOutBook(Libraryhub.Contracts.RequestObjs.AddCheckOutActivityRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:28:57.1845110+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:28:57.2902926+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:28:57.3281485+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NationalIdentificationNumber], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE ([a].[Id] = @__p_0) AND @__p_0 IS NOT NULL" (65d11854)
2020-04-02T18:29:14.1712709+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 12), @p6='?' (Size = 12), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [BookActivities] ([BookId], [CheckOutDate], [Email], [ExpectedReturnDate], [FullName], [NationalIdentificationNumber], [PhoneNumber], [ReturnDate], [Status], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [CheckOutActivityId]
FROM [BookActivities]
WHERE @@ROWCOUNT = 1 AND [CheckOutActivityId] = scope_identity();" (65d11854)
2020-04-02T18:29:14.2458545+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.CheckOutActivityResponseObj"'. (8a1b66c8)
2020-04-02T18:29:14.3296526+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.CheckOutBook (Libraryhub)" in 17146.145500000002ms (afa2e885)
2020-04-02T18:29:14.3404019+01:00 800000a9-0001-ff00-b63f-84710c7967bb [INF] Request finished in 17240.1724ms 201 application/json; charset=utf-8 (791a596a)
2020-04-02T18:29:29.1446611+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 GET https://localhost:44382/api/v1/book/LoadAllBooks   (ca22a1cb)
2020-04-02T18:29:29.1781762+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:29:29.1954227+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"GetAllPost\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IList`1[Libraryhub.Contracts.RequestObjs.BookResponseObj]]] GetAllPostAsync()" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:29:29.2029835+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:29:29.2244243+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:29:29.2314766+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [b].[BookId], [b].[CoverPrice], [b].[ISBN], [b].[IsAvailable], [b].[PublishYear], [b].[Title], [b0].[CheckOutActivityId], [b0].[BookId], [b0].[CheckOutDate], [b0].[Email], [b0].[ExpectedReturnDate], [b0].[FullName], [b0].[NationalIdentificationNumber], [b0].[PhoneNumber], [b0].[ReturnDate], [b0].[Status], [b0].[UserId]
FROM [Books] AS [b]
LEFT JOIN [BookActivities] AS [b0] ON [b].[BookId] = [b0].[BookId]
ORDER BY [b].[BookId], [b0].[CheckOutActivityId]" (65d11854)
2020-04-02T18:29:29.2717076+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Unable to Process request Flave123 (71209f87)
2020-04-02T18:29:29.2785033+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"System.Collections.Generic.List`1[[Libraryhub.Contracts.RequestObjs.BookResponseObj, Libraryhub.Contracts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'. (8a1b66c8)
2020-04-02T18:29:29.2959234+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.GetAllPostAsync (Libraryhub)" in 92.1519ms (afa2e885)
2020-04-02T18:29:29.3041073+01:00 800000b7-0000-fd00-b63f-84710c7967bb [INF] Request finished in 198.553ms 200 application/json; charset=utf-8 (791a596a)
2020-04-02T18:29:58.3044680+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Request starting HTTP/2.0 POST https://localhost:44382/api/v1/book/CheckInBooks application/json 108 (ca22a1cb)
2020-04-02T18:29:58.3524912+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Successfully validated the token. (60169667)
2020-04-02T18:29:58.3739405+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Route matched with "{action = \"CheckInBook\", controller = \"Book\", page = \"\", area = \"\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckInBook(Libraryhub.Contracts.RequestObjs.EditCheckOutActivityRequestObj)" on controller "Libraryhub.Controllers.V1.BookController" ("Libraryhub"). (122b2fdf)
2020-04-02T18:29:58.3798115+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Authorization was successful. (0d575a54)
2020-04-02T18:29:58.4645874+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Entity Framework Core "3.0.2" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None" (9958f5bb)
2020-04-02T18:29:58.4925502+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [b].[CheckOutActivityId], [b].[BookId], [b].[CheckOutDate], [b].[Email], [b].[ExpectedReturnDate], [b].[FullName], [b].[NationalIdentificationNumber], [b].[PhoneNumber], [b].[ReturnDate], [b].[Status], [b].[UserId]
FROM [BookActivities] AS [b]
WHERE ([b].[CheckOutActivityId] = @__id_0) AND @__id_0 IS NOT NULL" (65d11854)
2020-04-02T18:29:58.5237897+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [b].[CheckOutActivityId], [b].[BookId], [b].[CheckOutDate], [b].[Email], [b].[ExpectedReturnDate], [b].[FullName], [b].[NationalIdentificationNumber], [b].[PhoneNumber], [b].[ReturnDate], [b].[Status], [b].[UserId]
FROM [BookActivities] AS [b]
WHERE ([b].[CheckOutActivityId] = @__id_0) AND @__id_0 IS NOT NULL" (65d11854)
2020-04-02T18:29:58.6797465+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Executing DbCommand [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [BookActivities] SET [ReturnDate] = @p0, [Status] = @p1
WHERE [CheckOutActivityId] = @p2;
SELECT @@ROWCOUNT;" (65d11854)
2020-04-02T18:29:58.7673313+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Executing ObjectResult, writing value of type '"Libraryhub.Contracts.RequestObjs.CheckOutActivityResponseObj"'. (8a1b66c8)
2020-04-02T18:29:58.8985816+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Executed action "Libraryhub.Controllers.V1.BookController.CheckInBook (Libraryhub)" in 397.5278ms (afa2e885)
2020-04-02T18:29:58.9145927+01:00 800000b9-0000-fd00-b63f-84710c7967bb [INF] Request finished in 604.3461ms 201 application/json; charset=utf-8 (791a596a)
